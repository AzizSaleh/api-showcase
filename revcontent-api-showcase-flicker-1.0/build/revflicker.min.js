!function(window,factory){"use strict";window.revUtils=factory(window)}(window,function(window){"use strict";var utils={};return utils.validateApiParams=function(params){var errors=[];if(params.api_key||errors.push("api_key"),params.rev_position){var revPositions=["top_right","bottom_left","bottom_right"];this.inArray(revPositions,params.rev_position)<0&&errors.push("rev_position")}return params.pub_id||errors.push("pub_id"),params.widget_id||errors.push("widget_id"),params.domain||errors.push("domain"),errors.length&&console.log(errors),errors},utils.appendStyle=function(style,namespace){var namespace=namespace+"-append-style";if(!document.getElementById(namespace)){var el=document.createElement("style");el.type="text/css",el.id=namespace,el.innerHTML=style,document.getElementsByTagName("head")[0].appendChild(el)}},utils.extend=function(a,b){for(var prop in b)a[prop]=b[prop];return a},utils.inArray=function(array,item){for(var i=0;i<array.length;i++)if(array[i]===item)return i;return-1},utils.setCookie=function(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires},utils.getCookie=function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""},utils.prepend=function(el,html){el.insertBefore(html,el.firstChild)},utils.append=function(el,html){el.appendChild(html)},utils.next=function(el){function nextElementSibling(el){do el=el.nextSibling;while(el&&1!==el.nodeType);return el}return el.nextElementSibling||nextElementSibling(el)},utils.hasClass=function(el,className){return el?el.classList?el.classList.contains(className):new RegExp("(^| )"+className+"( |$)","gi").test(el.className):!1},utils.addClass=function(el,className){return el?void(el.classList?el.classList.add(className):el.className+=" "+className):!1},utils.removeClass=function(el,className){return el?void(el.classList?el.classList.remove(className):el.className=el.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")):!1},utils}),function(window,factory){"use strict";window.revDetect=factory(window)}(window,function(window){"use strict";var detect=new MobileDetect(window.navigator.userAgent);return detect.show=function(devices){return 3==devices.length?!0:detect.phone()&&devices.indexOf("phone")>-1?!0:detect.tablet()&&devices.indexOf("tablet")>-1?!0:!detect.mobile()&&devices.indexOf("desktop")>-1?!0:!1},detect}),function(window,factory){"use strict";window.revApi=factory(window)}(window,function(window){"use strict";var api={};return api.request=function(url,success,failure){var request=new XMLHttpRequest;request.open("GET",url,!0),request.onload=function(){request.status>=200&&request.status<400?success(JSON.parse(request.responseText)):failure&&failure(request)},request.onerror=function(){failure&&failure(request)},request.send()},api}),function(window,factory){"use strict";window.RevFlicker=factory(window,window.revUtils,window.revDetect,window.revApi)}(window,function(window,revUtils,revDetect,revApi){"use strict";var RevFlicker=function(opts){var defaults={per_row:{xxs:1,xs:1,sm:3,md:4,lg:5,xl:6,xxl:7},image_ratio:revDetect.mobile()?"wide_rectangle":"rectangle",header:"Trending Now",rev_position:revDetect.mobile()?"bottom_right":"top_right",next_effect:!0,sponsored:10,dots:!1,devices:["phone","tablet","desktop"],url:"https://trends.revcontent.com/api/v1/"};if(this.options=revUtils.extend(defaults,opts),!revUtils.validateApiParams(this.options).length&&revDetect.show(this.options.devices)){var that=this;revUtils.appendStyle("/* inject:css */#rev-flicker.rev-flicker{clear:both;margin:4px}#rev-flicker.rev-flicker *{box-sizing:border-box;font-size:inherit;line-height:inherit;margin:0;padding:0}#rev-flicker.rev-flicker:focus{outline:0}#rev-flicker.rev-flicker .rev-header{float:left;font-size:22px;line-height:32px;margin-bottom:0;text-align:left;width:auto}#rev-flicker.rev-flicker .flickity-viewport{clear:both}#rev-flicker.rev-flicker .rev-sponsored{line-height:24px;font-size:12px}#rev-flicker.rev-flicker .rev-sponsored.bottom-right,#rev-flicker.rev-flicker .rev-sponsored.top-right{float:right}#rev-flicker.rev-flicker .rev-sponsored.top-right a{vertical-align:-5px}#rev-flicker.rev-flicker .flickity-prev-next-button{-webkit-transition:all .5s ease-in-out;transition:all .5s ease-in-out;opacity:1}#rev-flicker.rev-flicker .flickity-prev-next-button:disabled{opacity:0}#rev-flicker.rev-flicker .rev-sponsored a{color:#999}#rev-flicker.rev-flicker a,#rev-flicker.rev-flicker a:focus,#rev-flicker.rev-flicker a:hover{text-decoration:none}#rev-flicker.rev-flicker .rev-ad a{display:block;color:#222}#rev-flicker.rev-flicker .rev-image{-webkit-transition:all .5s ease-in-out;transition:all .5s ease-in-out;background:#eee}#rev-flicker.rev-flicker .rev-image img{-webkit-transition:all .5s ease-in-out;transition:all .5s ease-in-out;opacity:0;display:block;max-width:100%;height:auto}#rev-flicker.rev-flicker.loaded .rev-image{background:0 0}#rev-flicker.rev-flicker.loaded .rev-image img{opacity:1}#rev-flicker.rev-flicker .rev-headline,#rev-flicker.rev-flicker .rev-provider{margin:0 10px;text-align:left}#rev-flicker.rev-flicker .rev-headline{margin-top:12px;height:40px;overflow:hidden}#rev-flicker.rev-flicker .rev-headline h3{font-size:16px;font-weight:500;letter-spacing:.2px;line-height:20px;margin:0}#rev-flicker.rev-flicker .rev-provider{font-size:12px;color:#888;line-height:30px;height:30px}#rev-flicker.rev-flicker .rev-ad{border:1px solid #eee;border-radius:5px;overflow:hidden}#rev-flicker .rev-content{-webkit-transition:opacity .5s ease-in-out;transition:opacity .5s ease-in-out;opacity:1}#rev-flicker .rev-content.rev-next{-webkit-transition:opacity .5s ease-in-out;transition:opacity .5s ease-in-out;opacity:.5}/* endinject */","rev-flicker");var flickerElement=document.createElement("div");flickerElement.id="rev-flicker",flickerElement["class"]="rev-flicker",revUtils.append(document.getElementById(this.options.id),flickerElement),this.flickity=new Flickity(flickerElement,{prevNextButtons:revDetect.mobile()?!1:!0,pageDots:this.options.dots,cellAlign:"left",percentPosition:!1,wrapAround:!0}),revUtils.addClass(this.flickity.element,"rev-flicker"),this.emitter=new EventEmitter,this.getContainerWidth(),this.emitter.on("containerReady",function(){that.setUp(),that.preData(),1==this.options.adp?that.isBlocked(function(is_blocked){that.getData(is_blocked)}):that.getData(!1)})}};return RevFlicker.prototype.isBlocked=function(e,o){if("undefined"!=typeof document.body){var t="0.1.2-dev",o=o?o:"sponsorText",n=document.createElement("DIV");n.id=o,n.style.position="absolute",n.style.left="-999px",n.appendChild(document.createTextNode("&nbsp;")),document.body.appendChild(n),setTimeout(function(){if(n){var o=0==n.clientHeight;try{}catch(d){console&&console.log&&console.log("ad-block-test error",d)}e(o,t),document.body.removeChild(n)}},175)}},RevFlicker.prototype.appendElements=function(){var header=document.createElement("h2");header.innerHTML=this.options.header,revUtils.addClass(header,"rev-header"),revUtils.prepend(this.flickity.element,header);var sponsored=document.createElement("div");revUtils.addClass(sponsored,"rev-sponsored"),sponsored.innerHTML='<a href="http://revcontent.com" target="_blank">Sponsored by Revcontent</a>',"top_right"==this.options.rev_position?(revUtils.addClass(sponsored,"top-right"),revUtils.prepend(this.flickity.element,sponsored)):("bottom_left"==this.options.rev_position||"bottom_right"==this.options.rev_position)&&(revUtils.addClass(sponsored,this.options.rev_position.replace("_","-")),revUtils.append(this.flickity.element,sponsored))},RevFlicker.prototype.getContainerWidth=function(){function check(){var containerWidth=that.flickity.element.offsetWidth;containerWidth>0?(that.containerWidth=containerWidth,that.emitter.emit("containerReady")):setTimeout(check,0)}var that=this;setTimeout(check,0)},RevFlicker.prototype.setUp=function(){this.containerWidth>=1500?this.perRow=this.options.per_row.xxl:this.containerWidth>=1250?this.perRow=this.options.per_row.xl:this.containerWidth>=1e3?this.perRow=this.options.per_row.lg:this.containerWidth>=750?this.perRow=this.options.per_row.md:this.containerWidth>=500?this.perRow=this.options.per_row.sm:this.containerWidth>=250?this.perRow=this.options.per_row.xs:this.perRow=this.options.per_row.xxs,"square"==this.options.image_ratio?(this.imageHeight=400,this.imageWidth=400):"rectangle"==this.options.image_ratio?(this.imageHeight=300,this.imageWidth=400):"wide_rectangle"==this.options.image_ratio&&(this.imageHeight=450,this.imageWidth=800);var width=this.containerWidth/this.perRow;this.margin=(.05*width).toFixed(2)/1,this.innerMargin=(.02*width).toFixed(2)/1,this.headlineFontSize=Math.max(14,(.03*width).toFixed(2)/1),this.headlineLineHeight=(1.25*this.headlineFontSize).toFixed(2)/1,this.headlineHeight=(2*this.headlineLineHeight).toFixed(2)/1,this.headlineMarginTop=(.2*this.headlineHeight).toFixed(2)/1,this.providerFontSize=Math.max(11,(this.headlineLineHeight/2).toFixed(2)/1),this.providerLineHeight=(1.25*this.providerFontSize).toFixed(2)/1,this.providerMargin=(.2*this.providerLineHeight).toFixed(2)/1,this.columnWidth=((this.containerWidth-this.margin*this.perRow)/(this.perRow+.5)).toFixed(2)/1,this.preloaderHeight=Math.round(this.columnWidth*(this.imageHeight/this.imageWidth))},RevFlicker.prototype.preData=function(){for(var that=this,i=0;i<this.options.sponsored;i++){var html='<div class="rev-ad"><a href="" target="_blank"><div class="rev-image" style="height:'+that.preloaderHeight+'px"><img src=""/></div><div class="rev-headline" style="height:'+that.headlineHeight+"px; margin:"+that.headlineMarginTop+"px "+that.innerMargin+'px 0;"><h3 style="font-size:'+that.headlineFontSize+"px; line-height:"+that.headlineLineHeight+'px;"></h3></div><div style="margin:'+that.providerMargin+"px "+that.innerMargin+"px "+that.providerMargin+"px;font-size:"+that.providerFontSize+"px;line-height:"+that.providerLineHeight+"px;height:"+that.providerLineHeight+'px;" class="rev-provider"></div></a></div>',cell=document.createElement("div");cell.style.width=that.columnWidth+"px",cell.style.marginRight=that.margin+"px",revUtils.addClass(cell,"rev-content"),that.options.next_effect&&i>=that.perRow&&revUtils.addClass(cell,"rev-next"),cell.innerHTML=html,that.flickity.append(cell)}that.appendElements(),that.selectedIndex=that.flickity.selectedIndex,that.options.next_effect&&that.flickity.on("cellSelect",function(){if(that.selectedIndex!=that.flickity.selectedIndex){that.selectedIndex=that.flickity.selectedIndex;for(var content=that.flickity.element.querySelectorAll(".rev-content"),nextIndex=that.selectedIndex+that.perRow,last=that.selectedIndex>=that.options.sponsored-that.perRow,i=0;i<content.length;i++)last?revUtils.removeClass(content[i],"rev-next"):i>=nextIndex?revUtils.addClass(content[i],"rev-next"):revUtils.removeClass(content[i],"rev-next")}})},RevFlicker.prototype.getData=function(is_blocked){var url=this.options.url+"?img_h="+this.imageHeight+"&img_w="+this.imageWidth+"&api_key="+this.options.api_key+"&pub_id="+this.options.pub_id+"&widget_id="+this.options.widget_id+"&domain="+this.options.domain+"&sponsored_count="+this.options.sponsored+"&sponsored_offset=0&internal_count=0&api_source=flick&is_blocked="+is_blocked,that=this;revApi.request(url,function(resp){for(var ads=that.flickity.element.querySelectorAll(".rev-ad"),i=0;i<resp.length;i++){var ad=ads[i],data=resp[i];ad.querySelectorAll("a")[0].setAttribute("href",data.url),ad.querySelectorAll("img")[0].setAttribute("src",data.image),ad.querySelectorAll(".rev-headline h3")[0].innerHTML=data.headline,ad.querySelectorAll(".rev-provider")[0].innerHTML=data.brand}imagesLoaded(that.flickity.element,function(){revUtils.addClass(that.flickity.element,"loaded")})})},RevFlicker});